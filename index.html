<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <title>Stopwatch with URL Save</title>
      <style>
          body {
                font-family: Arial, sans-serif;
                      text-align: center;
                            margin-top: 50px;
                                }
                                    #time {
                                          font-size: 3em;
                                                margin: 20px 0;
                                                    }
                                                        button {
                                                              font-size: 1.2em;
                                                                    margin: 5px;
                                                                          padding: 10px 20px;
                                                                              }
                                                                                </style>
                                                                                </head>
                                                                                <body>
                                                                                  <h1>Stopwatch</h1>
                                                                                    <div id="time">00:00:00</div>
                                                                                      <button onclick="start()">Start</button>
                                                                                        <button onclick="stop()">Stop</button>
                                                                                          <button onclick="reset()">Reset</button>

                                                                                            <script>
                                                                                                let startTime = null;
                                                                                                    let elapsed = 0;
                                                                                                        let timerInterval = null;

                                                                                                            // Load time from URL if available
                                                                                                                function loadFromURL() {
                                                                                                                      const params = new URLSearchParams(window.location.search);
                                                                                                                            const saved = parseInt(params.get("t"));
                                                                                                                                  if (!isNaN(saved)) {
                                                                                                                                          elapsed = saved;
                                                                                                                                                }
                                                                                                                                                      updateDisplay();
                                                                                                                                                          }

                                                                                                                                                              // Update stopwatch display
                                                                                                                                                                  function updateDisplay() {
                                                                                                                                                                        const total = elapsed + (startTime ? (Date.now() - startTime) : 0);
                                                                                                                                                                              const seconds = Math.floor(total / 1000) % 60;
                                                                                                                                                                                    const minutes = Math.floor(total / 60000) % 60;
                                                                                                                                                                                          const hours = Math.floor(total / 3600000);
                                                                                                                                                                                                document.getElementById("time").textContent =
                                                                                                                                                                                                        String(hours).padStart(2, "0") + ":" +
                                                                                                                                                                                                                String(minutes).padStart(2, "0") + ":" +
                                                                                                                                                                                                                        String(seconds).padStart(2, "0");
                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                function tick() {
                                                                                                                                                                                                                                      updateDisplay();
                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                              function start() {
                                                                                                                                                                                                                                                    if (!startTime) {
                                                                                                                                                                                                                                                            startTime = Date.now();
                                                                                                                                                                                                                                                                    timerInterval = setInterval(tick, 1000);
                                                                                                                                                                                                                                                                            // Update link every 5s
                                                                                                                                                                                                                                                                                    setInterval(saveToURL, 5000);
                                                                                                                                                                                                                                                                                          }
                                                                                                                                                                                                                                                                                              }

                                                                                                                                                                                                                                                                                                  function stop() {
                                                                                                                                                                                                                                                                                                        if (startTime) {
                                                                                                                                                                                                                                                                                                                elapsed += Date.now() - startTime;
                                                                                                                                                                                                                                                                                                                        startTime = null;
                                                                                                                                                                                                                                                                                                                                clearInterval(timerInterval);
                                                                                                                                                                                                                                                                                                                                        timerInterval = null;
                                                                                                                                                                                                                                                                                                                                                saveToURL();
                                                                                                                                                                                                                                                                                                                                                        updateDisplay();
                                                                                                                                                                                                                                                                                                                                                              }
                                                                                                                                                                                                                                                                                                                                                                  }

                                                                                                                                                                                                                                                                                                                                                                      function reset() {
                                                                                                                                                                                                                                                                                                                                                                            elapsed = 0;
                                                                                                                                                                                                                                                                                                                                                                                  startTime = null;
                                                                                                                                                                                                                                                                                                                                                                                        clearInterval(timerInterval);
                                                                                                                                                                                                                                                                                                                                                                                              timerInterval = null;
                                                                                                                                                                                                                                                                                                                                                                                                    saveToURL();
                                                                                                                                                                                                                                                                                                                                                                                                          updateDisplay();
                                                                                                                                                                                                                                                                                                                                                                                                              }

                                                                                                                                                                                                                                                                                                                                                                                                                  // Save time to URL
                                                                                                                                                                                                                                                                                                                                                                                                                      function saveToURL() {
                                                                                                                                                                                                                                                                                                                                                                                                                            const total = elapsed + (startTime ? (Date.now() - startTime) : 0);
                                                                                                                                                                                                                                                                                                                                                                                                                                  const url = new URL(window.location);
                                                                                                                                                                                                                                                                                                                                                                                                                                        url.searchParams.set("t", Math.floor(total));
                                                                                                                                                                                                                                                                                                                                                                                                                                              window.history.replaceState({}, "", url);
                                                                                                                                                                                                                                                                                                                                                                                                                                                  }

                                                                                                                                                                                                                                                                                                                                                                                                                                                      // On page load
                                                                                                                                                                                                                                                                                                                                                                                                                                                          loadFromURL();
                                                                                                                                                                                                                                                                                                                                                                                                                                                            </script>
                                                                                                                                                                                                                                                                                                                                                                                                                                                            </body>
                                                                                                                                                                                                                                                                                                                                                                                                                                                            </html>